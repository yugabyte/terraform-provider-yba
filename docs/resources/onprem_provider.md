---
page_title: "yba_onprem_provider Resource - YugabyteDB Anywhere"
description: |-
  OnPrem Provider Resource.
---

# yba_onprem_provider (Resource)

OnPrem Provider Resource.

For information on configuring on-premises providers, refer to [Create provider configuration](https://docs.yugabyte.com/preview/yugabyte-platform/configure-yugabyte-platform/set-up-cloud-provider/on-premises/).

## Example Usage

```terraform
resource "yba_onprem_provider" "onprem" {
  name = "<onprem-provider-name>"
  access_keys {
    key_info {
      key_pair_name             = "<ssh-key-pair-name>"
      ssh_private_key_file_path = "<ssh-key-pair-file-path>"
    }

  }
  regions {
    name = "<region-name>"
    zones {
      name = "<zone-name>"
    }

  }
  details {
    passwordless_sudo_access = true
    ssh_user                 = "<ssh-user>"
    skip_provisioning        = false
  }

  instance_types {
    instance_type_key {
      instance_type_code = "<instance-type-name>"
    }
    instance_type_details {
      volume_details_list {
        mount_path     = "<mount-paths-separated-by-commas>"
        volume_size_gb = 100
      }
    }
    mem_size_gb = 15
    num_cores   = 4
  }
  node_instances {
    instance_type = "<instance-type-name>"
    ip            = "<node-ip-instance>"
    region        = "<region-name>"
    zone          = "<zone-name>"
  }

}
```


If the user wishes to manually provision the nodes to be used in universe creation, the following methods can be followed (set *details.skip_provisioning* to *true*) :

- Running the preprovisioning script: The output of the provider would have the field *provision_instance_script* in *details*. Using the script, follow the steps provided in [running the preprovisioned script](https://docs.yugabyte.com/preview/yugabyte-platform/configure-yugabyte-platform/set-up-cloud-provider/on-premises/#run-the-preprovisioning-script). Command format:

  ```sh
  <Output of yba_onprem_provider.onprem.details[0].provision_instance_script> --ip <node instance ip> --mount_points <mount points>
  ```

- Setting up YBDB nodes manually: This is only required if SSH user does not have sudo access when *skip_provisioning* is *true*. Steps are provided in [setting up DB nodes manually](https://docs.yugabyte.com/preview/yugabyte-platform/configure-yugabyte-platform/set-up-cloud-provider/on-premises/#set-up-database-nodes-manually).

<!-- schema generated by tfplugindocs -->
## Schema

### Required

- `access_keys` (Block List, Min: 1) Access key of provider. (see [below for nested schema](#nestedblock--access_keys))
- `details` (Block List, Min: 1, Max: 1) Configuration details for onprem provider. (see [below for nested schema](#nestedblock--details))
- `name` (String) Name of the provider.
- `regions` (Block List, Min: 1) Description of regions associated with the onprem provider. (see [below for nested schema](#nestedblock--regions))

### Optional

- `instance_types` (Block List) Describe the instance types for the provider. (see [below for nested schema](#nestedblock--instance_types))
- `node_instances` (Block List) Node instances associated with the provider. (see [below for nested schema](#nestedblock--node_instances))
- `timeouts` (Block, Optional) (see [below for nested schema](#nestedblock--timeouts))

### Read-Only

- `code` (String) Code of the OnPrem provider.
- `id` (String) The ID of this resource.
- `version` (Number) Version of the provider.

<a id="nestedblock--access_keys"></a>
### Nested Schema for `access_keys`

Required:

- `key_info` (Block List, Min: 1) Key information to connect to YBDB nodes. (see [below for nested schema](#nestedblock--access_keys--key_info))

Read-Only:

- `access_key_id` (List of Object) Access Key Identification. (see [below for nested schema](#nestedatt--access_keys--access_key_id))
- `creation_date` (String) Creation date of Access Key.
- `expiration_date` (String) Creation date of Access Key.

<a id="nestedblock--access_keys--key_info"></a>
### Nested Schema for `access_keys.key_info`

Required:

- `key_pair_name` (String) SSH Key Pair name.
- `ssh_private_key_file_path` (String) Private Key Path to access YBDB nodes.

Optional:

- `air_gap_install` (Boolean) Air Gap Installation required. False by default.
- `delete_remote` (Boolean) Delete Remote.
- `public_key` (String) Public Key to access YBDB nodes.
- `vault_file` (String) Vault file.
- `vault_password_file` (String) Vault password file.

Read-Only:

- `install_node_exporter` (Boolean) Install Node Exporter.
- `node_exporter_port` (Number) Node Exporter Port.
- `node_exporter_user` (String) Node Exporter User.
- `ntp_servers` (List of String) List of NTP Servers.
- `passwordless_sudo_access` (Boolean) Can sudo actions be carried out by user without a password.
- `private_key` (String) Private Key to access YBDB nodes.
- `provision_instance_script` (String) Script to provision the YBDB nodes. To be run on the YBDB nodes if skip_provisioning is set to false.
- `skip_provisioning` (Boolean) Set to true if YBDB nodes have been prepared manually, set to false to provision during universe creation.
- `ssh_port` (Number) SSH Port.
- `ssh_user` (String) SSH user.


<a id="nestedatt--access_keys--access_key_id"></a>
### Nested Schema for `access_keys.access_key_id`

Read-Only:

- `keycode` (String)
- `provider_uuid` (String)



<a id="nestedblock--details"></a>
### Nested Schema for `details`

Required:

- `passwordless_sudo_access` (Boolean) Can sudo actions be carried out by user without a password.
- `skip_provisioning` (Boolean) Set to true if YBDB nodes have been prepared manually, set to false to provision during universe creation.
- `ssh_user` (String) SSH user.

Optional:

- `air_gap_install` (Boolean) Air Gap Installation required. False by default.
- `install_node_exporter` (Boolean) Install Node Exporter.
- `node_exporter_port` (Number) Node Exporter Port.
- `node_exporter_user` (String) Node Exporter User.
- `ntp_servers` (List of String) List of NTP Servers.
- `ssh_port` (Number) SSH Port.
- `yb_home_dir` (String) YB Home Directory.

Read-Only:

- `provision_instance_script` (String) Script to provision the YBDB nodes. To be run on the YBDB nodes if skip_provisioning is set to false


<a id="nestedblock--regions"></a>
### Nested Schema for `regions`

Required:

- `name` (String) Name of the region. Same as the code.
- `zones` (Block List, Min: 1) Description of zones associated with the region. (see [below for nested schema](#nestedblock--regions--zones))

Optional:

- `latitude` (Number) Latitude of the region. 0 by default.
- `longitude` (Number) Longitude of the region. 0 by default.

Read-Only:

- `code` (String) Region code.
- `config` (Map of String) Region related configuration.
- `uuid` (String) Region UUID.

<a id="nestedblock--regions--zones"></a>
### Nested Schema for `regions.zones`

Required:

- `name` (String) Name of the zone. Varies by cloud provider.

Read-Only:

- `active` (Boolean) Flag indicating if the zone is active
- `code` (String) Code of the zone.
- `uuid` (String) Zone UUID



<a id="nestedblock--instance_types"></a>
### Nested Schema for `instance_types`

Required:

- `instance_type_details` (Block List, Min: 1, Max: 1) Instance Type Key. (see [below for nested schema](#nestedblock--instance_types--instance_type_details))
- `instance_type_key` (Block List, Min: 1, Max: 1) Instance Type Key. (see [below for nested schema](#nestedblock--instance_types--instance_type_key))
- `mem_size_gb` (Number) Memory size in GB.
- `num_cores` (Number) Number of cores per instance.

Read-Only:

- `active` (Boolean) True if instance type is Active.
- `instance_type_code` (String) Instance type code assigned by user.
- `provider_code` (String) Provider code of instance type.
- `provider_uuid` (String) Provider uuid of instance type.

<a id="nestedblock--instance_types--instance_type_details"></a>
### Nested Schema for `instance_types.instance_type_details`

Required:

- `volume_details_list` (Block List, Min: 1) Details of Volumes attached. (see [below for nested schema](#nestedblock--instance_types--instance_type_details--volume_details_list))

Optional:

- `tenancy` (String) Tenancy.

<a id="nestedblock--instance_types--instance_type_details--volume_details_list"></a>
### Nested Schema for `instance_types.instance_type_details.volume_details_list`

Required:

- `mount_path` (String) Mount Path, separated by commas.
- `volume_size_gb` (Number) Volume Size in GB attached to instance.

Optional:

- `volume_type` (String) Volume Type attached to instance. SSD by default.



<a id="nestedblock--instance_types--instance_type_key"></a>
### Nested Schema for `instance_types.instance_type_key`

Required:

- `instance_type_code` (String) Instance type code assigned by user.

Read-Only:

- `provider_uuid` (String) Provider UUID.



<a id="nestedblock--node_instances"></a>
### Nested Schema for `node_instances`

Required:

- `instance_type` (String) Node instance type.
- `ip` (String) IP address of node.
- `region` (String) Region of node.
- `zone` (String) Zone of node.

Optional:

- `in_use` (Boolean) Is the node used in a universe.
- `instance_name` (String) Node instance name provided by the user.
- `node_configs` (Block List) Node Configurations. (see [below for nested schema](#nestedblock--node_instances--node_configs))
- `node_name` (String) Node name allocated during universe creation.
- `node_uuid` (String) Node UUID.
- `ssh_user` (String) SSH user.

Read-Only:

- `details_json` (String) Details of the node
- `instance_type_code` (String) Node instance type code.
- `zone_uuid` (String) Zone UUID of node.

<a id="nestedblock--node_instances--node_configs"></a>
### Nested Schema for `node_instances.node_configs`

Required:

- `type` (String) Type.
- `value` (String) Value.



<a id="nestedblock--timeouts"></a>
### Nested Schema for `timeouts`

Optional:

- `create` (String)
- `delete` (String)
- `update` (String)

## Import

On-premises providers can be imported using `provider uuid`:

```sh
terraform import yba_onprem_provider.onprem <provider-uuid>
```
