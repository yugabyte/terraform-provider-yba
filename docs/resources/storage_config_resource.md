---
page_title: "yba_storage_config_resource Resource - YugabyteDB Anywhere"
description: |-
  Create Storage configurations.
---

# yba_storage_config_resource (Resource)

Create Storage configurations.

The following credentials are required as environment variables (if fields are not set) to configure the corresponding Backup storage configurations:

|Cloud Provider|Setting|Configuration Field|Environment Variable|
|-------|--------|----------|-------------------------------|
|[S3](https://docs.aws.amazon.com/cli/latest/userguide/cli-configure-envvars.html)||||
||Access Key ID|`s3_credentials.access_key_id`|`AWS_ACCESS_KEY_ID`|
||Secret Access Key|`s3_credentials.secret_access_key`|`AWS_SECRET_ACCESS_KEY`|
|[GCS](https://cloud.google.com/docs/authentication/application-default-credentials)||||
|| GCP Service Account Credentials File Path|`gcs_credentials.application_credentials`|`GOOGLE_APPLICATION_CREDENTIALS`|
|[Azure](https://learn.microsoft.com/en-us/azure/developer/go/azure-sdk-authentication?tabs=bash)||||
||Azure Storage SAS Token|`azure_credentials.sas_token`|`AZURE_STORAGE_SAS_TOKEN`|

-> **Note:** S3 Environment variables are not required for IAM based S3 storage configurations. Please set *use_iam_instance_profile* to use host IAM configuration for S3 storage configurations.

## Example Usage

```terraform
resource "yba_storage_config_resource" "storage_config" {
  name            = "<storage-config-code>"
  backup_location = "<storage-location/bucket-location>"
  config_name     = "<storage-config-name>"
}

resource "yba_storage_config_resource" "s3_storage_config" {
  name            = "S3"
  backup_location = "<storage-location/bucket-location>"
  config_name     = "<storage-config-name>"
  s3_credentials {
    access_key_id     = "<s3-access-key-id>"
    secret_access_key = "<s3-secret-access-key>"
  }
}

resource "yba_storage_config_resource" "gcs_storage_config" {
  name            = "GCS"
  backup_location = "<storage-location/bucket-location>"
  config_name     = "<storage-config-name>"
  gcs_credentials {
    application_credentials = <<EOT
    <gcs-service-account-credentials-json>
    EOT
  }
}

resource "yba_storage_config_resource" "az_storage_config" {
  name            = "AZ"
  backup_location = "<storage-location/bucket-location>"
  config_name     = "<storage-config-name>"
  azure_credentials {
    sas_token = "<azure-sas-token>"
  }
}
```

The details for configuration are available in the [YugabyteDB Anywhere Configure Backup Target Documentation](https://docs.yugabyte.com/preview/yugabyte-platform/configure-yugabyte-platform/backup-target/).

<!-- schema generated by tfplugindocs -->
## Schema

### Required

- `backup_location` (String) The complete backup location including "s3://" or "gs://".
- `config_name` (String) Name of the Storage Configuration.
- `name` (String) Name of config provider. Allowed values: S3, GCS, NFS, AZ.

### Optional

- `azure_credentials` (Block List, Max: 1) Credentials for Azure storage configurations. (see [below for nested schema](#nestedblock--azure_credentials))
- `gcs_credentials` (Block List, Max: 1) Credentials for GCS storage configurations. (see [below for nested schema](#nestedblock--gcs_credentials))
- `s3_credentials` (Block List, Max: 1) Credentials for S3 storage configurations. (see [below for nested schema](#nestedblock--s3_credentials))
- `timeouts` (Block, Optional) (see [below for nested schema](#nestedblock--timeouts))
- `use_iam_instance_profile` (Boolean) Use IAM Role from the YugabyteDB Anywhere Host for S3. Storage configuration creation will fail on insufficient permissions on the host. False by default.

### Read-Only

- `data` (Map of String) Location and Credentials.
- `id` (String) The ID of this resource.

<a id="nestedblock--azure_credentials"></a>
### Nested Schema for `azure_credentials`

Required:

- `sas_token` (String, Sensitive) Azure SAS Token. Can also be set using environment variable AZURE_STORAGE_SAS_TOKEN.


<a id="nestedblock--gcs_credentials"></a>
### Nested Schema for `gcs_credentials`

Required:

- `application_credentials` (String, Sensitive) Google Service Account JSON Credentials as string. Can also be set by providing the JSON file path with the environment variable GOOGLE_APPLICATION_CREDENTIALS.


<a id="nestedblock--s3_credentials"></a>
### Nested Schema for `s3_credentials`

Required:

- `access_key_id` (String, Sensitive) S3 Access Key ID. Can also be set using environment variable AWS_ACCESS_KEY_ID.
- `secret_access_key` (String, Sensitive) S3 Secret Access Key. Can also be set using environment variable AWS_SECRET_ACCESS_KEY.


<a id="nestedblock--timeouts"></a>
### Nested Schema for `timeouts`

Optional:

- `create` (String)
- `delete` (String)
- `update` (String)

## Import

Storage configurations can be imported using `storage configuration uuid`:

```sh
terraform import yba_storage_config_resource.storage_config <storage configuration uuid>
```
